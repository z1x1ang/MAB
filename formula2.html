<!DOCTYPE html>
<html>
<head>
    <title>详细的增量更新公式推导</title>
    <!-- 引入 MathJax 用于渲染 LaTeX -->
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
</head>
<body>

<h2>多臂老虎机问题: 增量更新公式详细推导</h2>

<div class="formula-explanation">
    <p>
        在多臂老虎机问题中，我们希望以增量的方式更新奖励的估计值，而不是存储所有历史奖励数据。我们使用 \(Q_n\) 来表示在第 \(n\) 次选择动作 \(a\) 之前的奖励估计。当第 \(n\) 次选择发生并收到奖励 \(R_n\) 时，我们想要更新 \(Q_n\) 到 \(Q_{n+1}\)。为了实现这一点，我们采用以下推导过程：
    </p>
    <p>
        首先，\(Q_n\) 是前 \(n-1\) 次奖励的平均值，所以它可以表示为：
    </p>
    <p>
        \[
        Q_n = \frac{1}{n-1}\sum_{i=1}^{n-1}R_i
        \]
    </p>
    <p>
        如果我们要计算前 \(n\) 次奖励的平均值，我们可以添加 \(R_n\) 到求和中并除以 \(n\)，如下所示：
    </p>
    <p>
        \[
        Q_{n+1} = \frac{1}{n}\sum_{i=1}^{n}R_i
        \]
    </p>
    <p>
        这可以重新编写为：
    </p>
    <p>
        \[
        Q_{n+1} = \frac{1}{n}(R_n + \sum_{i=1}^{n-1}R_i)
        \]
    </p>
    <p>
        由于 \(\sum_{i=1}^{n-1}R_i = (n-1)Q_n\)（因为 \(Q_n\) 是平均值），我们可以将其替换到上述表达式中：
    </p>
    <p>
        \[
        Q_{n+1} = \frac{1}{n}(R_n + (n-1)Q_n)
        \]
    </p>
    <p>
        通过分配，我们得到：
    </p>
    <p>
        \[
        Q_{n+1} = \frac{1}{n}R_n + \frac{n-1}{n}Q_n
        \]
    </p>
    <p>
        这可以进一步重写为：
    </p>
    <p>
        \[
        Q_{n+1} = Q_n + \frac{1}{n}(R_n - Q_n)
        \]
    </p>
    <p>
        最终，这个表达式给出了一种方法，通过这种方法，我们可以只利用当前的奖励 \(R_n\) 和前一次的估计 \(Q_n\) 来增量地更新我们的估计值 \(Q_{n+1}\)。这避免了需要存储和重新计算基于所有历史奖励的平均值，从而在计算上更加高效。
    </p>
</div>

</body>
</html>
